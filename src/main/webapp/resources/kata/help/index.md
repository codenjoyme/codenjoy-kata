<meta charset="UTF-8">

## Вступление

Игровой demo-сервер доступен так же в интернете 24/7 в целях
ознакомления [http://codenjoy.com/codenjoy-contest](http://codenjoy.com/codenjoy-contest).

Игра с открытым исходным кодом. Для реализации своей игры, исправления
ошибок в текущей и внесения других правок необходимо для начала
[форкнуть проект](https://github.com/codenjoyme/codenjoy.git).
В корне репозитория есть описание в файле Readme.md - там описано, что делать дальше.

Для реализации своего алгоритма-головоломки необходимо реализовать 
интерфейс `CodingDojo\games\kata\src\main\java\com\codenjoy\dojo\kata\model\levels\Level.javа`
и разместить его рядом в пакете `algorithms`. 

По возникающим вопросам, пиши в [skype alexander.baglay](skype:alexander.baglay)
или на почту [apofig@gmail.com](mailto:apofig@gmail.com).

## В чем суть игры?

Есть масса алгоритмических задач, выстроенных в очередь. Тебе предстоит
на время решать их одна за другой, соревнуясь при этом с коллегами.
Для этого ты будешь писать своего бота, решающего все эти головоломки.
Каждый играет на своем собственном поле.

Побеждает игрок с большим числом очков (до условленного времени).
Очки засчитываются за каждый пройденный тест (очки-подбодряшки)
и за решение всей головоломки целиком. Чем быстрее решается
головоломка, тем больше очков получает игрок. 

Игра идет на время, между алгоритмами можно делать
передышку, а очки подсчитываются в зависимости от сложности
алгоритма и времени, затраченного на решение.

Важно! Проверочные тесты появляются один за другим по мере правильного
ответа на них. Если ответ дан неправильно, новый тест не появится, пока
игрок не исправит свой алгоритм. 

Когда все тесты на сервере исчерпаются, игрок перейдет
в режим ожидания - таймер выключается. По готовности,
игрок может запустить следующую головоломку командой 
`message('StartNextLevel'`) - при этом запустится таймер 
и время пойдет. Если игрок захочет пропустить головоломку -
достаточно отправить команды `message('SkipThisLevel')`.
**Внимание!** Пропущенный уровень нельзя вернуть обратно.

Узнать описание головоломки можно кликнув на поле `Level:N`, расположенное
под именем игрока над полем. Откроется `alert` с описанием головоломки.

Нумерация головоломок идет от 0, и самая первая головоломка реализована для
проверки подключения клиента к серверу. За ее прохождение очков не начисляется.

## Подключение к серверу

Итак, игрок [регистрируется на сервере](../../../register?gameName=kata),
указывая свой email.

Далее необходимо подключиться из кода к серверу через websocket.
[Эта подборка](https://github.com/codenjoyme/codenjoy-clients.git)
клиентов для разных языков программирования тебе поможет в твоей игре.
Как запустить клиент смотри в корне проекта в файле README.md.

Если ты не можешь найти свой язык - придется написать свой клиент
(а после пошарить с нами на почту [apofig@gmail.com](mailto:apofig@gmail.com))

Адрес для подключения к игре на сервере выглядит так (ты можешь скопировать его
из игровой комнаты):

`https://[server]/codenjoy-contest/board/player/[user]?code=[code]`

Тут `[server]` - домен или ip-адрес игрового сервера, `[user]` - id игрока, a `[code]` -
твой security token. Убедись что код хранится в тайне, иначе любой участник
сможет играть от твоего имени.

В коде твоего клиента тебе нужно найти похожую строчку и заменить её твоим URL -
тем самым, ты задаёшь логин/пароль для доступа к серверу.
Затем запусти твой клиент и убедись, что сервер получает команды твоего клиента.
После этого можно приступать к работе над логикой бота.

## Формат сообщений

После подключения клиент будет регулярно (каждую секунду) получать JSON
c информацией о текущем состоянии игры.Формат таков

<pre>{
  'description':'Описание головоломки.',
  'history':[
    {
      'answer':'answer1',
      'question':'question1',
      'valid':true
    },
    {
      'answer':'answer1',
      'question':'question2',
      'valid':true
    }
  ],
  'level':0,
  'nextQuestion':'question3',
  'questions':[
    'question1',
    'question2',
    'question3'
  ]
}</pre>

Для существующих клиентов в чистом виде с таким JSON работать не придется.
Детальнее смотри в файле README.txt в корне проекта.

## Как играть?

Игра пошаговая, каждую секунду сервер посылает твоему клиенту
вопросы по активным на текущий момент тестам и ожидает ответов.
За следующую секунду игрок должен успеть дать этот ответ.
Если не успел — не беда, ничего не произойдет и сервер повторит свои вопросы.

Твоя цель отвечать на вопросы в соответствии с задуманным тобой алгоритмом.
Продвигаясь от вопроса к вопросу игрок будет зарабатывать все больше очков.
Отвечай на вопросы оперативно, не ошибайся и получишь максимальное количество очков.
Основная цель игры - обыграть по очкам всех соперников.

## Команды управления

Ответы даются командой message, ее формат таков, что на 
каждый вопрос в input JSON надо дать ответ. Все ответы 
запаковываются в массив (см. ниже). Пропускать вопросы не стоит -
порядок их должен соответствовать порядку вопросов в input JSON.

`message('['answer1','answer2','answer3']')`

Когда все тесты на сервере исчерпаются, игрок перейдет
в режим ожидания - таймер выключается. По готовности,
игрок может запустить следующую головоломку командой
`message('StartNextLevel'`) - при этом запустится таймер
и время пойдет. Если игрок захочет пропустить головоломку -
достаточно отправить команды `message('SkipThisLevel')`.
**Внимание!** Пропущенный уровень нельзя вернуть обратно.

## Настройки

Параметры будут меняться[*](index.md#ask) по ходу игры.

## Кейзы

## <a id="ask"></a> Спроси Сенсея

Параметры могут изменяться по ходу игры. Настройки текущей игры
ты сможешь всегда [подглядеть тут](/codenjoy-contest/rest/settings/player).
Пожалуйста, спроси у Сенсея как интерпретировать эти данные. Ты можешь найти Сенсея
в чате, который подготовили организаторы для обсуждения вопросов.

## Подсказки

Первостепенная задача – написать websocket клиента, который подключится
к серверу. Затем заставить героя на поле слушаться команд.
Таким образом, игрок подготовится к основной игре.
Основная цель – вести осмысленную игру и победить.

## Клиент и API

Организаторы предоставляют игрокам подготовленные клиенты в исходном 
коде на нескольких языках. Каждый из этих клиентов уже умеет связываться 
с сервером, принимать и разбирать сообщение от сервера (обычно это называется board)
и отправлять серверу команды.

Слишком много форы клиентский код не дает играющим, поскольку в этом коде
еще надо разобраться, но там реализована логика общения с сервером +
некоторое высокоуровневое API для работы с доской (что уже приятно).

TODO

## Как провести такой же ивент самостоятельно?

Перед тобой opensource проект. Для реализации своей новой игры, модификации этой игры,
любой другой модификации сервера или исправления найденной ошибки
[форкни проект](https://github.com/codenjoyme/codenjoy.git).
Все инструкции ты найдешь в Readme.md файлах - они подскажут, что делать дальше.

Если у тебя есть вопросы - прошу, задавай их мне
в [скайпе alexander.baglay](skype:alexander.baglay)
или по почте [apofig@gmail.com](mailto:apofig@gmail.com).

Удачной игры и пусть победит сильнейший! 